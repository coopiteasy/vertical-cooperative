<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<menuitem name="Declaration" id="menu_easy_my_coop_main_declaration" parent="easy_my_coop.menu_main_easy_my_coop" sequence="10"/>
		
		<record id="tax_shelter_declaration_form" model="ir.ui.view">
            <field name="name">tax.shelter.declaration.form</field>
            <field name="model">tax.shelter.declaration</field>
            <field name="arch" type="xml">
                <form string="Tax shelter declaration">
                    <header>
	                   	<button name="compute_declaration" string="Process Declaration" type="object" class="oe_highlight" groups="easy_my_coop.group_energiris_manager"/>
	                   	<button name="validate_declaration" string="Validate Declaration" type="object" states="computed" class="oe_highlight" groups="easy_my_coop.group_energiris_manager"/>
	                   	<button name="reset_declaration" string="Reset Declaration" type="object" groups="easy_my_coop.group_energiris_manager"/>
	                   	<field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                    	<group>
	                    	<group>
		                    	<field name="name"/>
	                   			<field name="tax_shelter_percentage"/>
	                    	</group>
		                	<group>
	                    		<field name="date_from"/>
	                    		<field name="date_to"/>
	        				</group>
	        			</group>
                   		<notebook>
                   			<page string="Tax shelter certificates">
		                   		<field name="tax_shelter_certificates">
		                   			<tree>
		                    			<field name="partner_id"/>
		                    			<field name="cooperator_number"/>
		                    			<field name="total_amount"/>
		                    			<field name="state"/>
		                   			</tree>
		                   		</field>
	                   		</page>
                   		</notebook>
                   	</sheet>
                </form>
            </field>
        </record>
        
        <record id="tax_shelter_declaration_tree" model="ir.ui.view">
            <field name="name">tax.shelter.declaration.tree</field>
            <field name="model">tax.shelter.declaration</field>
            <field name="arch" type="xml">
                <tree string="Tax shelter declaration">
	                <field name="name"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="tax_shelter_percentage"/>
                </tree>
            </field>
        </record>
        
        <record id="tax_shelter_declaration_action" model="ir.actions.act_window">
            <field name="name">Tax Shelter Declaration</field>
            <field name="res_model">tax.shelter.declaration</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="tax_shelter_declaration_tree"/>
        </record>
	
		<menuitem action="tax_shelter_declaration_action" name="Tax Shelter Declaration" id="menu_tax_shelter_declaration"  parent="menu_easy_my_coop_main_declaration" sequence="10" groups="easy_my_coop.group_energiris_manager"/>
		
		<record id="tax_shelter_certificate_form" model="ir.ui.view">
            <field name="name">tax.shelter.certificate.form</field>
            <field name="model">tax.shelter.certificate</field>
            <field name="arch" type="xml">
                <form string="Tax shelter certificate">
                    <header>
                    	<field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                    	<group>
	                    	<group>
	                    		<field name="cooperator_number"/>
		                    	<field name="partner_id"/>
	                   			<field name="declaration_id"/>
	                    	</group>
		                	<group>
	                    		<field name="total_amount_subscribed"/>
	                    		<field name="total_amount_resold"/>
	                    		<field name="total_amount_transfered"/>
	                    		<field name="total_amount"/>
	        				</group>
	        			</group>
                   		<notebook>
                   			<page string="Subscription">
		                   		<field name="subscribed_lines">
		                   			<tree>
		                    			<field name="transaction_date"/>
		                    			<field name="share_type"/>
		                    			<field name="share_short_name"/>
		                    			<field name="quantity"/>
		                    			<field name="share_unit_price"/>
		                    			<field name="type"/>
		                    			<field name="amount_subscribed"/>
		                   			</tree>
		                   		</field>
	                   		</page>
	                   		<page string="Sell back">
		                   		<field name="resold_lines">
		                   			<tree>
		                    			<field name="transaction_date"/>
		                    			<field name="share_type"/>
		                    			<field name="share_short_name"/>
		                    			<field name="quantity"/>
		                    			<field name="share_unit_price"/>
		                    			<field name="type"/>
		                    			<field name="amount_resold"/>
		                   			</tree>
		                   		</field>
	                   		</page>
	                   		<page string="Transfered">
		                   		<field name="transfered_lines">
		                   			<tree>
		                    			<field name="transaction_date"/>
		                    			<field name="share_type"/>
		                    			<field name="share_short_name"/>
		                    			<field name="quantity"/>
		                    			<field name="share_unit_price"/>
		                    			<field name="type"/>
		                    			<field name="amount_transfered"/>
		                   			</tree>
		                   		</field>
	                   		</page>
                   		</notebook>
                   	</sheet>
                </form>
            </field>
        </record>
	</data>
</odoo>